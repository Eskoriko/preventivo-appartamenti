<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preventivo Appartamenti 2026</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #444;
            font-weight: 600;
        }
        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .checkbox-group input {
            width: auto;
        }
        .result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            text-align: center;
        }
        .total {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        .details {
            font-size: 0.9em;
            opacity: 0.9;
            line-height: 1.6;
        }
        .beach-discount {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        .btn-whatsapp {
            display: block;
            width: 100%;
            background: #25D366;
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            text-decoration: none;
            text-align: center;
            transition: background 0.3s, transform 0.2s;
        }
        .btn-whatsapp:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }
        .btn-whatsapp::before {
            content: "üì± ";
        }
        .info-box {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.85em;
            color: #1a5a8a;
        }
        .info-box ul {
            margin: 10px 0 0 0;
            padding-left: 20px;
        }
        .info-box li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèñÔ∏è Preventivo Vacanza</h1>
        <p class="subtitle">Calcola il costo del tuo soggiorno</p>
        
        <div class="form-group">
            <label>üè† Appartamento</label>
            <select id="appartamento" onchange="calcolaPreventivo()">
                <option value="A1" data-max="4">A1 (2-4 persone)</option>
                <option value="A2" data-max="4">A2 (2-4 persone)</option>
                <option value="B" data-max="4">B (4 persone)</option>
                <option value="BB" data-max="2">BB (2 persone)</option>
                <option value="C" data-max="2">C (2 persone)</option>
                <option value="D" data-max="4">D (4 persone)</option>
                <option value="E" data-max="4">E (2-4 persone)</option>
                <option value="F" data-max="4">F (2-4 persone)</option>
            </select>
        </div>

        <div class="form-group">
            <label>üìÖ Periodo</label>
            <select id="periodo" onchange="calcolaPreventivo()">
                <option value="maggio">Maggio (1-31)</option>
                <option value="giugno">Giugno (1-30)</option>
                <option value="luglio1">Luglio 1-12</option>
                <option value="luglio2">Luglio 12-19</option>
                <option value="luglio3">Luglio 19-26</option>
                <option value="luglio4">Luglio 26 - Ago 2</option>
                <option value="agosto1">Agosto 2-9</option>
                <option value="agosto2">Agosto 9-16</option>
                <option value="agosto3">Agosto 16-23</option>
                <option value="agosto4">Agosto 23-30</option>
                <option value="settembre">Settembre (1-30)</option>
            </select>
        </div>

        <div class="form-group">
            <label>üìÜ Numero settimane</label>
            <select id="settimane" onchange="calcolaPreventivo()">
                <option value="1">1 settimana</option>
                <option value="2">2 settimane</option>
                <option value="3">3 settimane</option>
                <option value="4">4 settimane</option>
            </select>
        </div>

        <div class="form-group">
            <label>üë• Numero persone</label>
            <select id="persone" onchange="calcolaPreventivo()">
                <option value="1">1 persona</option>
                <option value="2">2 persone</option>
                <option value="3">3 persone</option>
                <option value="4">4 persone</option>
            </select>
        </div>

        <div class="form-group">
            <div class="checkbox-group">
                <input type="checkbox" id="biancheria" onchange="calcolaPreventivo()">
                <label for="biancheria" style="margin: 0;">üõèÔ∏è Biancheria</label>
            </div>
        </div>

        <div class="form-group">
            <div class="checkbox-group">
                <input type="checkbox" id="cane" onchange="calcolaPreventivo()">
                <label for="cane" style="margin: 0;">üêï Cane</label>
            </div>
        </div>

        <div class="result" id="result">
            <div class="details" id="dettagli"></div>
            <div class="total" id="totale">‚Ç¨ 0</div>
            <div class="beach-discount" id="spiaggia"></div>
        </div>

        <div id="capacityWarning" class="warning" style="display: none;">
            ‚ö†Ô∏è Attenzione: hai selezionato pi√π persone della capienza massima dell'appartamento!
        </div>

        <a href="#" id="whatsappBtn" class="btn-whatsapp" onclick="inviaWhatsApp(event)">
            Richiedi Prenotazione
        </a>

        <div class="info-box">
            <strong>‚ÑπÔ∏è Cosa √® incluso:</strong>
            <ul>
                <li>Pulizie: ‚Ç¨50/settimana (incluse nel totale)</li>
                <li>Biancheria: ‚Ç¨10/giorno (1-2 pers.) o ‚Ç¨20/giorno (3-4 pers.)</li>
                <li>Cane: ‚Ç¨10/giorno</li>
                <li>Sconto spiaggia convenzionata (dalla 3¬™ fila)</li>
            </ul>
        </div>
    </div>

    <script>
        const prezzi = {
            A1: { maggio: 300, giugno: 350, luglio1: 450, luglio2: 500, luglio3: 550, luglio4: 600, agosto1: 750, agosto2: 900, agosto3: 900, agosto4: 600, settembre: 350 },
            A2: { maggio: 300, giugno: 350, luglio1: 450, luglio2: 500, luglio3: 550, luglio4: 600, agosto1: 750, agosto2: 900, agosto3: 900, agosto4: 600, settembre: 350 },
            B: { maggio: 350, giugno: 450, luglio1: 550, luglio2: 600, luglio3: 700, luglio4: 750, agosto1: 900, agosto2: 1100, agosto3: 1100, agosto4: 700, settembre: 400 },
            BB: { maggio: 250, giugno: 280, luglio1: 350, luglio2: 400, luglio3: 450, luglio4: 500, agosto1: 600, agosto2: 700, agosto3: 700, agosto4: 500, settembre: 280 },
            C: { maggio: 250, giugno: 300, luglio1: 400, luglio2: 450, luglio3: 500, luglio4: 550, agosto1: 650, agosto2: 750, agosto3: 750, agosto4: 550, settembre: 300 },
            D: { maggio: 350, giugno: 450, luglio1: 550, luglio2: 600, luglio3: 700, luglio4: 750, agosto1: 900, agosto2: 1100, agosto3: 1100, agosto4: 700, settembre: 400 },
            E: { maggio: 300, giugno: 400, luglio1: 500, luglio2: 550, luglio3: 600, luglio4: 650, agosto1: 800, agosto2: 950, agosto3: 950, agosto4: 650, settembre: 350 },
            F: { maggio: 300, giugno: 400, luglio1: 500, luglio2: 550, luglio3: 600, luglio4: 650, agosto1: 800, agosto2: 950, agosto3: 950, agosto4: 650, settembre: 350 }
        };

        const scontiSpiaggia = {
            maggio: 50, giugno: 50, luglio1: 20, luglio2: 20, luglio3: 20, luglio4: 20,
            agosto1: 10, agosto2: 10, agosto3: 10, agosto4: 10, settembre: 50
        };

        const nomiPeriodi = {
            maggio: "Maggio", giugno: "Giugno", luglio1: "Luglio 1-12", luglio2: "Luglio 12-19",
            luglio3: "Luglio 19-26", luglio4: "Luglio 26 - Agosto 2", agosto1: "Agosto 2-9",
            agosto2: "Agosto 9-16", agosto3: "Agosto 16-23", agosto4: "Agosto 23-30", settembre: "Settembre"
        };

        let preventivo = {};

        function calcolaPreventivo() {
            const appSelect = document.getElementById('appartamento');
            const app = appSelect.value;
            const maxPersone = parseInt(appSelect.options[appSelect.selectedIndex].dataset.max);
            const periodo = document.getElementById('periodo').value;
            const settimane = parseInt(document.getElementById('settimane').value);
            const persone = parseInt(document.getElementById('persone').value);
            const biancheria = document.getElementById('biancheria').checked;
            const cane = document.getElementById('cane').checked;

            // Warning capacit√†
            const warningEl = document.getElementById('capacityWarning');
            warningEl.style.display = persone > maxPersone ? 'block' : 'none';

            // Calcoli
            const prezzoBase = prezzi[app][periodo] * settimane;
            const pulizie = 50 * settimane;
            const giorniTotali = settimane * 7;
            
            let costoBiancheria = 0;
            if (biancheria) {
                costoBiancheria = persone <= 2 ? 10 * giorniTotali : 20 * giorniTotali;
            }
            
            const costoCane = cane ? 10 * giorniTotali : 0;
            const totale = prezzoBase + pulizie + costoBiancheria + costoCane;
            const scontoSpiaggia = scontiSpiaggia[periodo];

            // Salva preventivo per WhatsApp
            preventivo = {
                appartamento: app,
                periodo: nomiPeriodi[periodo],
                settimane: settimane,
                persone: persone,
                biancheria: biancheria,
                cane: cane,
                prezzoBase: prezzoBase,
                pulizie: pulizie,
                costoBiancheria: costoBiancheria,
                costoCane: costoCane,
                totale: totale,
                scontoSpiaggia: scontoSpiaggia
            };

            // Mostra risultato
            let dettagli = `Appartamento ${app} ‚Ä¢ ${nomiPeriodi[periodo]}<br>`;
            dettagli += `${settimane} settimana/e ‚Ä¢ ${persone} persona/e<br><br>`;
            dettagli += `Soggiorno: ‚Ç¨${prezzoBase}<br>`;
            dettagli += `Pulizie: ‚Ç¨${pulizie}`;
            if (biancheria) dettagli += `<br>Biancheria: ‚Ç¨${costoBiancheria}`;
            if (cane) dettagli += `<br>Cane: ‚Ç¨${costoCane}`;

            document.getElementById('dettagli').innerHTML = dettagli;
            document.getElementById('totale').textContent = `‚Ç¨ ${totale}`;
            document.getElementById('spiaggia').innerHTML = `üèñÔ∏è Sconto spiaggia convenzionata: <strong>${scontoSpiaggia}%</strong><br><small>(dalla 3¬™ fila in poi)</small>`;
        }

        function inviaWhatsApp(e) {
            e.preventDefault();
            
            let messaggio = `Ciao! Vorrei prenotare:\n\n`;
            messaggio += `üè† Appartamento: ${preventivo.appartamento}\n`;
            messaggio += `üìÖ Periodo: ${preventivo.periodo}\n`;
            messaggio += `üìÜ Settimane: ${preventivo.settimane}\n`;
            messaggio += `üë• Persone: ${preventivo.persone}\n`;
            messaggio += `üõèÔ∏è Biancheria: ${preventivo.biancheria ? 'S√¨' : 'No'}\n`;
            messaggio += `üêï Cane: ${preventivo.cane ? 'S√¨' : 'No'}\n\n`;
            messaggio += `üí∞ Totale preventivo: ‚Ç¨${preventivo.totale}\n\n`;
            messaggio += `Attendo conferma disponibilit√†. Grazie!`;

            const numeroWhatsApp = '393514707090';
            const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(messaggio)}`;
            window.open(url, '_blank');
        }

        // Calcola al caricamento
        calcolaPreventivo();
    </script>
</body>
</html>